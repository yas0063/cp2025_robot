# 最終課題（最終レポート）

## 物体の干渉

総合演習第3回では，フィールドの左（別の場所）に物体を並べていました．では，[サンプルプログラム(main4.c)](src/main4.c)を，librobo.aのあるフォルダにコピーして，コンパイル・実行してください．


これは，物体をRGB値のR値の小さい順で中央 `(y = 0.0)` に横並びにするためのプログラムです．しかし，物体を移動させる先に，すでに別の物体がある場合，物体を解放することができません．


## 課題

### 基本課題

7個の物体をRGB値のR値の小さい順に，中央 `(y = 0.0)` に横並びに配置させる下記プログラム1,2を作成してください．
 
なお，各物体の初期状態は`(-0.5, -0.5)`，`(-0.5, 0.5)`，`(0.5, 0.5)`，`(0.5, -0.5)`で囲まれる領域から，ランダムに選ばれています．

1. 7個全ての物体を上部 `(y = 0.7)` に退避させてから，物体を配置していくプログラムを作成してください．また，この作業の完了までにかかった時間を表示してください．**プログラムファイル名: `final1.c`**

1. 1で作成したプログラムを改良して，物体をなるべく早く配置できるプログラムを作成してください．改良した課題プログラムでの作業時間と1で作成したプログラムでの作業時間とを比較し，改良プログラムでどれだけ作業を高速化できたかを定量的に示してください．物体の位置は毎回ランダムに決まるので，10回程度実行した結果の平均値で比較しましょう．**プログラムファイル名: `final2.c`**

#### 参考

全ての物体の半径と位置がわかれば，物体を並べていくときにアームが移動する総距離を計算することができます．物体を並べていく順番ごとに距離を求め，その中から最短のものを選ぶという高速化法も考えることができます．ただし，物体の個数が少ない時はいいのですが，n個の物体を並べていく順番の組み合わせは`nPn`であり，個数が増えると組み合わせの数は爆発的に増大し，現実的な時間では計算が終わらなくなります．（組み合わせ爆発については，[こちら](https://www.youtube.com/watch?v=Q4gTV4r0zRs)を参考）

### 発展課題（余力がある人向け）

7個の物体のうち，重量が最も大きい物体と最も小さい物体を上部 `(y = 0.7)` に退避させ，残りの5個の物体を重量の小さい順に，中央 `(y = 0.0)` に横並びに配置させるプログラムを作成してください．できるだけ高速な配置を目指しましょう．**プログラムファイル名: `final3.c`**

#### ヒント

まず全物体の重量を計測し，最大値と最小値を見つけましょう．最大・最小の物体は上部に退避させ，残りの物体をソートして中央に配置しましょう．

#### update_robot()関数の使用について

update_robot()は，main関数内でのみ使用してください．自作関数内で呼び出すことは禁止します．ただし，main関数内では，複数のwhileループに分けて使用してもかまいません．

良い例：main関数内で複数のwhileループを使用
```
while(update_robot()) {
    // 重量計測処理
}
while(update_robot()) {
    // 物体配置処理
}
```

悪い例：自作関数内でupdate_robot()を使用
```
void my_function() {
    while(update_robot()) {
        // 処理
    }
}
```

Note: 適宜コメントを入れたり，関数化したりして，他人にもわかりやすいプログラムになるように心がけてください．全くコメントのないものは減点します．

Attention: 他人のプログラムを写したことが判明した場合は，両者とも0点になります．課題内容に対応していないプログラムにも点をつけません．




### 提出物

- 基本課題：プログラムファイル（`final1.c`, `final2.c`）
- 基本課題：高速化のアイデアを書いたテキストファイル
- 基本課題：作業時間を比較したエクセルファイルなど（形式は自由）
- （できた人は）発展課題：プログラムファイル（`final3.c`）
- 総合演習の授業の感想を書いたテキストファイル（来年度の授業のために，忌憚のない率直な意見をお願いします．批判的な内容であっても減点は一切しません．）

上記のファイルを入れたフォルダをzipファイルに圧縮し，CLE上に提出してください．


Note: 提出物一式を入れるフォルダの名前は学生番号にしてください（ログインIDではない！）．

### 提出先
CLE上のレポートbox

### 提出期限

締め切りは以下の通りです．

- 2/5 23:59
